<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LBPRINT - Impression 3D sur demande</title>
<style>
  body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f8; }
  header { background: #0b69ff; color: white; padding: 20px; text-align: center; }
  main { max-width: 800px; margin: 20px auto; background: #ffffff; padding: 20px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
  h1,h2 { color: #0b69ff; }
  label { display: block; margin-top: 10px; font-weight: bold; }
  input, textarea, select { width: 100%; padding: 8px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc; }
  button { background: #0b69ff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 15px; }
  button:hover { opacity: 0.9; }
  .info { background: #eef; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
  footer { text-align: center; padding: 20px; color: #666; font-size: 14px; }
  a.button-link { text-decoration: none; color: white; }
  .hidden { display:none !important; }
  #restartButton { display:none; margin-top: 10px; }
  #restartContainer { text-align: center; margin-top: 10px; }
</style>
</head>
<body>
<header>
  <h1 style="color: white; font-size: 2.5em; margin: 0;">LBPRINT - Impression 3D sur demande</h1>
</header>
<main>
  <div class="info">
    <h2>Comment ça marche ?</h2>
    <ul>
      <li>Vous me décrivez le modèle que vous voulez ou vous m'envoyez votre fichier STL.</li>
      <li>Je vous confirme le prix et le délai.</li>
      <li>Vous payez avant impression via <strong>PayPal</strong>, <strong>Revolut</strong> ou <strong>Bitcoin</strong>.</li>
      <li>Je vous imprime et je vous envoie le modèle par courrier (Colissimo ou Mondial Relay).</li>
      <li><strong>Livraison uniquement en France métropolitaine</strong>.</li>
    </ul>
  </div>

  <h2>Formulaire de demande</h2>
  <form id="demandForm" onsubmit="handleSubmit(event)">
    <label for="name">Nom :</label>
    <input type="text" id="name" name="name" required>

    <label for="email">Email :</label>
    <input type="email" id="email" name="email" required>

    <label for="address">Adresse de livraison :</label>
    <input type="text" id="address" name="address" placeholder="Rue, CP, Ville" required>

    <label for="modelDescription">Description du modèle :</label>
    <textarea id="modelDescription" name="modelDescription" rows="4" placeholder="Décrivez votre modèle ou votre idée" required></textarea>

    <label for="fileUpload">Fichier STL (optionnel) :</label>
    <input type="file" id="fileUpload" name="fileUpload" accept=".stl">

    <label for="color">Couleur souhaitée :</label>
    <select id="color" name="color">
      <option value="blanc">Blanc</option>
      <option value="noir">Noir</option>
      <option value="fluorescent">Fluorescent</option>
    </select>

    <label for="delivery">Mode de livraison :</label>
    <select id="delivery" name="delivery">
      <option value="courrier">Envoi postal (Colissimo ou Mondial Relay)</option>
    </select>

    <label for="payment">Méthode de paiement :</label>
    <select id="payment" name="payment">
      <option value="paypal">PayPal</option>
      <option value="revolut">Revolut</option>
      <option value="bitcoin">Bitcoin</option>
    </select>

    <!-- Honeypot anti-spam -->
    <input type="text" name="_gotcha" class="hidden" tabindex="-1" autocomplete="off">

    <button type="submit">Envoyer la demande</button>
  </form>

  <div id="confirmation" style="display:none; margin-top:20px; background:#dfd; padding:15px; border-radius:5px;">
    Merci ! Votre demande a été envoyée. Je vous répondrai par e-mail avec les instructions de paiement et le coût final selon le modèle.
  </div>

  <div id="restartContainer">
    <button id="restartButton" onclick="restartForm()">Faire une nouvelle demande</button>
  </div>

  <h2>Contact alternatif</h2>
  <p>Facebook Marketplace / Messenger : indisponible pour le moment</p>
</main>
<footer>
  &copy; 2025 LBPRINT sur demande | Tous droits réservés
</footer>

<script>
function handleSubmit(event) {
  event.preventDefault();
  const form = document.getElementById('demandForm');

  const formData = new FormData(form);
  const FORMSPREE_URL = 'https://formspree.io/f/myzndkaq';

  fetch(FORMSPREE_URL, {
    method: 'POST',
    body: formData,
    headers: {
      'Accept': 'application/json'
    }
  }).then(async response => {
    if(response.ok){
      form.style.display = 'none';
      document.getElementById('confirmation').style.display = 'block';
      document.getElementById('restartButton').style.display = 'inline-block';
    } else {
      const data = await response.json().catch(()=>({}));
      alert('Erreur lors de l\'envoi : ' + (data.error || 'Veuillez réessayer.'));
    }
  }).catch(error => {
    console.error(error);
    alert('Erreur réseau, veuillez réessayer.');
  });
}

function restartForm() {
  document.getElementById('demandForm').reset();
  document.getElementById('demandForm').style.display = 'block';
  document.getElementById('confirmation').style.display = 'none';
  document.getElementById('restartButton').style.display = 'none';
}
</script>
</body>
</html>